<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 2942.84375 793.6000366210938" style="max-width: 2942.84px; background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-1770294895015"><style>#mermaid-1770294895015{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1770294895015 .error-icon{fill:#552222;}#mermaid-1770294895015 .error-text{fill:#552222;stroke:#552222;}#mermaid-1770294895015 .edge-thickness-normal{stroke-width:2px;}#mermaid-1770294895015 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1770294895015 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1770294895015 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1770294895015 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1770294895015 .marker{fill:#333333;stroke:#333333;}#mermaid-1770294895015 .marker.cross{stroke:#333333;}#mermaid-1770294895015 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1770294895015 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1770294895015 .cluster-label text{fill:#333;}#mermaid-1770294895015 .cluster-label span,#mermaid-1770294895015 p{color:#333;}#mermaid-1770294895015 .label text,#mermaid-1770294895015 span,#mermaid-1770294895015 p{fill:#333;color:#333;}#mermaid-1770294895015 .node rect,#mermaid-1770294895015 .node circle,#mermaid-1770294895015 .node ellipse,#mermaid-1770294895015 .node polygon,#mermaid-1770294895015 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1770294895015 .flowchart-label text{text-anchor:middle;}#mermaid-1770294895015 .node .label{text-align:center;}#mermaid-1770294895015 .node.clickable{cursor:pointer;}#mermaid-1770294895015 .arrowheadPath{fill:#333333;}#mermaid-1770294895015 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1770294895015 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1770294895015 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1770294895015 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1770294895015 .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-1770294895015 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1770294895015 .cluster text{fill:#333;}#mermaid-1770294895015 .cluster span,#mermaid-1770294895015 p{color:#333;}#mermaid-1770294895015 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1770294895015 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1770294895015 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"/></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"/></marker><g class="root"><g class="clusters"/><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Start LE-PreauthFlow" id="L-Start-PreauthFlow-0" d="M1121.4000091552734,149.386150289686L960.7968826293945,178.0217918762825C800.1937561035156,206.65743346287903,478.9875030517578,263.92871663607207,318.3843765258789,298.2643581908795C157.78125,332.59999974568683,157.78125,343.9999996821086,157.78125,349.6999996503194L157.78125,355.3999996185303"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Start LE-JwtFlow" id="L-Start-JwtFlow-0" d="M1121.4000091552734,157.14486318116064L1055.2472715377808,184.4873859525114C989.0945339202881,211.82990872386213,856.7890586853027,266.5149542665636,790.6363210678101,299.5574770061252C724.4835834503174,332.59999974568683,724.4835834503174,343.9999996821086,724.4835834503174,349.6999996503194L724.4835834503174,355.3999996185303"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Start LE-OAuthFlow" id="L-Start-OAuthFlow-0" d="M1187.4250106811523,152.31168066875318L1292.880219777425,180.4597338588385C1398.335428873698,208.60778704892383,1609.2458470662434,264.90389342909447,1714.7010561625164,298.75194658739065C1820.156265258789,332.59999974568683,1820.156265258789,343.9999996821086,1820.156265258789,349.6999996503194L1820.156265258789,355.3999996185303"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Start LE-TgWebAppFlow" id="L-Start-TgWebAppFlow-0" d="M1187.4250106811523,147.07623475421204L1455.3166770935059,176.09686226338758C1723.2083435058594,205.11748977256306,2258.9916763305664,263.1587447909141,2526.88334274292,297.8793722683005C2794.7750091552734,332.59999974568683,2794.7750091552734,343.9999996821086,2794.7750091552734,349.6999996503194L2794.7750091552734,355.3999996185303"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-PreauthFlow LE-PreauthToken" id="L-PreauthFlow-PreauthToken-0" d="M157.78125,388.8000011444092L157.78125,394.50000111262005C157.78125,400.2000010808309,157.78125,411.6000010172526,157.78125,423.0000009536743C157.78125,434.400000890096,157.78125,445.80000082651776,157.78125,451.5000007947286L157.78125,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-PreauthToken LE-Spin1" id="L-PreauthToken-Spin1-0" d="M157.78125,490.60000228881836L157.78125,496.30000225702923C157.78125,502.00000222524005,157.78125,513.4000021616617,157.78125,524.8000020980835C157.78125,536.2000020345052,157.78125,547.6000019709269,157.78125,553.3000019391378L157.78125,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Spin1 LE-TakePrize1" id="L-Spin1-TakePrize1-0" d="M157.78125,592.4000034332275L157.78125,596.5666700998942C157.78125,600.7333367665609,157.78125,609.0666700998942,157.78125,617.4000034332275C157.78125,625.7333367665609,157.78125,634.0666700998942,157.78125,638.2333367665609L157.78125,642.4000034332275"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TakePrize1 LE-UserLinked1" id="L-TakePrize1-UserLinked1-0" d="M157.78125,675.8000049591064L157.78125,681.5000049273173C157.78125,687.2000048955282,157.78125,698.6000048319498,157.78125,710.0000047683716C157.78125,721.4000047047933,157.78125,732.800004641215,157.78125,738.5000046094259L157.78125,744.2000045776367"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-JwtFlow LE-AuthStatus" id="L-JwtFlow-AuthStatus-0" d="M687.2398319244385,383.77380368368364L666.3821516036987,390.31150322868206C645.524471282959,396.8492027736805,603.8091106414795,409.9246018636774,582.9514303207397,422.1623013768867C562.09375,434.400000890096,562.09375,445.80000082651776,562.09375,451.5000007947286L562.09375,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-AuthStatus LE-Ok200" id="L-AuthStatus-Ok200-0" d="M484.5978740687928,490.60000228881836L458.1471872326203,496.30000225702923C431.69650039644785,502.00000222524005,378.79512672410283,513.4000021616617,352.3444398879303,524.8000020980835C325.8937530517578,536.2000020345052,325.8937530517578,547.6000019709269,325.8937530517578,553.3000019391378L325.8937530517578,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-AuthStatus LE-Unauthorized401" id="L-AuthStatus-Unauthorized401-0" d="M538.0034265071179,490.60000228881836L529.7809811855377,496.30000225702923C521.5585358639574,502.00000222524005,505.1136452207971,513.4000021616617,496.89119989921693,524.8000020980835C488.6687545776367,536.2000020345052,488.6687545776367,547.6000019709269,488.6687545776367,553.3000019391378L488.6687545776367,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-AuthStatus LE-NotFound404" id="L-AuthStatus-NotFound404-0" d="M594.5709868939529,490.60000228881836L605.656031253587,496.30000225702923C616.7410756132211,502.00000222524005,638.9111643324895,513.4000021616617,649.9962086921237,524.8000020980835C661.0812530517578,536.2000020345052,661.0812530517578,547.6000019709269,661.0812530517578,553.3000019391378L661.0812530517578,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-JwtFlow LE-Refresh" id="L-JwtFlow-Refresh-0" d="M761.7273349761963,385.31474571274646L779.4290291468302,391.5956215862345C797.1307233174642,397.87649745972243,832.5341116587321,410.4382492066984,850.2358058293661,422.41912504839723C867.9375,434.400000890096,867.9375,445.80000082651776,867.9375,451.5000007947286L867.9375,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Refresh LE-NewTokens" id="L-Refresh-NewTokens-0" d="M867.9375,490.60000228881836L867.9375,496.30000225702923C867.9375,502.00000222524005,867.9375,513.4000021616617,867.9375,524.8000020980835C867.9375,536.2000020345052,867.9375,547.6000019709269,867.9375,553.3000019391378L867.9375,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-OAuthFlow LE-GoogleVerify" id="L-OAuthFlow-GoogleVerify-0" d="M1773.8250160217285,375.4830198470388L1665.365639368693,383.4025166981448C1556.9062627156575,391.32201354925064,1339.9875094095867,407.1610072514625,1231.528132756551,420.7805040707793C1123.0687561035156,434.400000890096,1123.0687561035156,445.80000082651776,1123.0687561035156,451.5000007947286L1123.0687561035156,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-GoogleVerify LE-JwtOut1" id="L-GoogleVerify-JwtOut1-0" d="M1123.0687561035156,490.60000228881836L1123.0687561035156,496.30000225702923C1123.0687561035156,502.00000222524005,1123.0687561035156,513.4000021616617,1123.0687561035156,524.8000020980835C1123.0687561035156,536.2000020345052,1123.0687561035156,547.6000019709269,1123.0687561035156,553.3000019391378L1123.0687561035156,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-OAuthFlow LE-GoogleRegisterOAuth2" id="L-OAuthFlow-GoogleRegisterOAuth2-0" d="M1773.8250160217285,378.1830869723338L1716.9343903859456,385.6525726358905C1660.0437647501628,393.12205829944725,1546.262513478597,408.0610296265608,1489.3718878428142,421.23051525832847C1432.4812622070312,434.400000890096,1432.4812622070312,445.80000082651776,1432.4812622070312,451.5000007947286L1432.4812622070312,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-GoogleRegisterOAuth2 LE-LinkSession" id="L-GoogleRegisterOAuth2-LinkSession-0" d="M1432.4812622070312,490.60000228881836L1432.4812622070312,496.30000225702923C1432.4812622070312,502.00000222524005,1432.4812622070312,513.4000021616617,1432.4812622070312,524.8000020980835C1432.4812622070312,536.2000020345052,1432.4812622070312,547.6000019709269,1432.4812622070312,553.3000019391378L1432.4812622070312,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-LinkSession LE-JwtOut2" id="L-LinkSession-JwtOut2-0" d="M1432.4812622070312,592.4000034332275L1432.4812622070312,596.5666700998942C1432.4812622070312,600.7333367665609,1432.4812622070312,609.0666700998942,1432.4812622070312,617.4000034332275C1432.4812622070312,625.7333367665609,1432.4812622070312,634.0666700998942,1432.4812622070312,638.2333367665609L1432.4812622070312,642.4000034332275"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-OAuthFlow LE-GoogleCallback" id="L-OAuthFlow-GoogleCallback-0" d="M1820.156265258789,388.8000011444092L1820.156265258789,394.50000111262005C1820.156265258789,400.2000010808309,1820.156265258789,411.6000010172526,1820.156265258789,423.0000009536743C1820.156265258789,434.400000890096,1820.156265258789,445.80000082651776,1820.156265258789,451.5000007947286L1820.156265258789,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-GoogleCallback LE-GoogleUpsert" id="L-GoogleCallback-GoogleUpsert-0" d="M1820.156265258789,490.60000228881836L1820.156265258789,496.30000225702923C1820.156265258789,502.00000222524005,1820.156265258789,513.4000021616617,1820.156265258789,524.8000020980835C1820.156265258789,536.2000020345052,1820.156265258789,547.6000019709269,1820.156265258789,553.3000019391378L1820.156265258789,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-GoogleUpsert LE-JwtOut3" id="L-GoogleUpsert-JwtOut3-0" d="M1820.156265258789,592.4000034332275L1820.156265258789,596.5666700998942C1820.156265258789,600.7333367665609,1820.156265258789,609.0666700998942,1820.156265258789,617.4000034332275C1820.156265258789,625.7333367665609,1820.156265258789,634.0666700998942,1820.156265258789,638.2333367665609L1820.156265258789,642.4000034332275"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgWebAppFlow LE-TgWebAppLogin" id="L-TgWebAppFlow-TgWebAppLogin-0" d="M2794.7750091552734,388.8000011444092L2794.7750091552734,394.50000111262005C2794.7750091552734,400.2000010808309,2794.7750091552734,411.6000010172526,2794.7750091552734,423.0000009536743C2794.7750091552734,434.400000890096,2794.7750091552734,445.80000082651776,2794.7750091552734,451.5000007947286L2794.7750091552734,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgWebAppLogin LE-TgUpsert" id="L-TgWebAppLogin-TgUpsert-0" d="M2794.7750091552734,490.60000228881836L2794.7750091552734,496.30000225702923C2794.7750091552734,502.00000222524005,2794.7750091552734,513.4000021616617,2794.7750091552734,524.8000020980835C2794.7750091552734,536.2000020345052,2794.7750091552734,547.6000019709269,2794.7750091552734,553.3000019391378L2794.7750091552734,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgUpsert LE-JwtOut4" id="L-TgUpsert-JwtOut4-0" d="M2794.7750091552734,592.4000034332275L2794.7750091552734,596.5666700998942C2794.7750091552734,600.7333367665609,2794.7750091552734,609.0666700998942,2794.7750091552734,617.4000034332275C2794.7750091552734,625.7333367665609,2794.7750091552734,634.0666700998942,2794.7750091552734,638.2333367665609L2794.7750091552734,642.4000034332275"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-OAuthFlow LE-TgLogin" id="L-OAuthFlow-TgLogin-0" d="M1866.4875144958496,378.6212879381302L1919.0364729563396,386.0177401073875C1971.5854314168294,393.4141922766449,2076.683348337809,408.20709661515957,2129.2323067982993,421.3035487526278C2181.781265258789,434.400000890096,2181.781265258789,445.80000082651776,2181.781265258789,451.5000007947286L2181.781265258789,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgLogin LE-LinkSession2" id="L-TgLogin-LinkSession2-0" d="M2181.781265258789,490.60000228881836L2181.781265258789,496.30000225702923C2181.781265258789,502.00000222524005,2181.781265258789,513.4000021616617,2181.781265258789,524.8000020980835C2181.781265258789,536.2000020345052,2181.781265258789,547.6000019709269,2181.781265258789,553.3000019391378L2181.781265258789,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-LinkSession2 LE-JwtOut5" id="L-LinkSession2-JwtOut5-0" d="M2181.781265258789,592.4000034332275L2181.781265258789,596.5666700998942C2181.781265258789,600.7333367665609,2181.781265258789,609.0666700998942,2181.781265258789,617.4000034332275C2181.781265258789,625.7333367665609,2181.781265258789,634.0666700998942,2181.781265258789,638.2333367665609L2181.781265258789,642.4000034332275"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-OAuthFlow LE-TgCallback" id="L-OAuthFlow-TgCallback-0" d="M1866.4875144958496,375.65782659738625L1969.2385552724202,383.5481889901009C2071.9895960489907,391.4385513828156,2277.4916776021323,407.21927616824496,2380.2427183787026,420.8096385291705C2482.9937591552734,434.400000890096,2482.9937591552734,445.80000082651776,2482.9937591552734,451.5000007947286L2482.9937591552734,457.20000076293945"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgCallback LE-TgExisting" id="L-TgCallback-TgExisting-0" d="M2482.9937591552734,490.60000228881836L2482.9937591552734,496.30000225702923C2482.9937591552734,502.00000222524005,2482.9937591552734,513.4000021616617,2482.9937591552734,524.8000020980835C2482.9937591552734,536.2000020345052,2482.9937591552734,547.6000019709269,2482.9937591552734,553.3000019391378L2482.9937591552734,559.0000019073486"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TgExisting LE-JwtOut6" id="L-TgExisting-JwtOut6-0" d="M2482.9937591552734,592.4000034332275L2482.9937591552734,596.5666700998942C2482.9937591552734,600.7333367665609,2482.9937591552734,609.0666700998942,2482.9937591552734,617.4000034332275C2482.9937591552734,625.7333367665609,2482.9937591552734,634.0666700998942,2482.9937591552734,638.2333367665609L2482.9937591552734,642.4000034332275"/></g><g class="edgeLabels"><g transform="translate(157.78125, 321.19999980926514)" class="edgeLabel"><g transform="translate(-27.087499618530273, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="54.17499923706055"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">No JWT</span></div></foreignObject></g></g><g transform="translate(724.4835834503174, 321.19999980926514)" class="edgeLabel"><g transform="translate(-30.36250114440918, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="60.72500228881836"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Has JWT</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 321.19999980926514)" class="edgeLabel"><g transform="translate(-54.056251525878906, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="108.11250305175781"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">OAuth Provider</span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 321.19999980926514)" class="edgeLabel"><g transform="translate(-64.01875305175781, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="128.03750610351562"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Telegram WebApp</span></div></foreignObject></g></g><g transform="translate(157.78125, 423.0000009536743)" class="edgeLabel"><g transform="translate(-61.71875, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="123.4375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">X-SESSION-ID + IP</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(157.78125, 710.0000047683716)" class="edgeLabel"><g transform="translate(-157.78125, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="315.5625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Links user_uuid if JWT or session user exists</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(325.8937530517578, 524.8000020980835)" class="edgeLabel"><g transform="translate(-66.14375305175781, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="132.28750610351562"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Valid JWT + userID</span></div></foreignObject></g></g><g transform="translate(488.6687545776367, 524.8000020980835)" class="edgeLabel"><g transform="translate(-41.5, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="83"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Invalid JWT</span></div></foreignObject></g></g><g transform="translate(661.0812530517578, 524.8000020980835)" class="edgeLabel"><g transform="translate(-44.375, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="88.75"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">User missing</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(867.9375, 524.8000020980835)" class="edgeLabel"><g transform="translate(-142.4812469482422, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="284.9624938964844"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">JWT strict: code in JWT matches userID</span></div></foreignObject></g></g><g transform="translate(1123.0687561035156, 423.0000009536743)" class="edgeLabel"><g transform="translate(-57.25625228881836, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="114.51250457763672"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Google ID Token</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1432.4812622070312, 423.0000009536743)" class="edgeLabel"><g transform="translate(-127.875, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="255.75"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Google OAuth2 code + X-SESSION-ID</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 423.0000009536743)" class="edgeLabel"><g transform="translate(-84.59375, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="169.1875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Google OAuth2 redirect</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 524.8000020980835)" class="edgeLabel"><g transform="translate(-77.85625457763672, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="155.71250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">code in query/header</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 423.0000009536743)" class="edgeLabel"><g transform="translate(-64.3499984741211, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="128.6999969482422"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">tgInitData in body</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(2181.781265258789, 423.0000009536743)" class="edgeLabel"><g transform="translate(-126.8375015258789, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="253.6750030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Telegram Web Login + X-SESSION-ID</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(2482.9937591552734, 423.0000009536743)" class="edgeLabel"><g transform="translate(-95.2437515258789, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="190.4875030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Telegram WebApp redirect</span></div></foreignObject></g></g><g transform="translate(2482.9937591552734, 524.8000020980835)" class="edgeLabel"><g transform="translate(-52.57500076293945, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="105.1500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">tgWebAppData</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(-5.6656646728515625, -8)" class="root"><g class="clusters"><g id="RouletteRules" class="cluster default flowchart-label"><rect height="287.00000381469727" width="1069.565631866455" y="8" x="8" ry="0" rx="0" style=""/><g transform="translate(473.97656440734863, 8)" class="cluster-label"><foreignObject height="18.399999618530273" width="137.6125030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Roulette auth rules</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Spin2 LE-AuthOptional" id="L-Spin2-AuthOptional-0" d="M215.27179134298495,66.4000015258789L202.5822222068006,72.10000149408977C189.89265307061626,77.80000146230061,164.5135147982476,89.20000139872234,151.82394566206324,100.60000133514404C139.1343765258789,112.00000127156575,139.1343765258789,123.40000120798747,139.1343765258789,129.10000117619833L139.1343765258789,134.80000114440918"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Spin2 LE-AuthRequired" id="L-Spin2-AuthRequired-0" d="M289.6282178122885,66.4000015258789L302.3177869484728,72.10000149408977C315.00735608465715,77.80000146230061,340.38649435702587,89.20000139872234,353.07606349321014,100.60000133514404C365.76563262939453,112.00000127156575,365.76563262939453,123.40000120798747,365.76563262939453,129.10000117619833L365.76563262939453,134.80000114440918"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-AuthOptional LE-LinkPreauth" id="L-AuthOptional-LinkPreauth-0" d="M139.1343765258789,168.2000026702881L139.1343765258789,173.90000263849893C139.1343765258789,179.6000026067098,139.1343765258789,191.0000025431315,151.82394566206324,202.40000247955322C164.5135147982476,213.80000241597494,189.89265307061626,225.20000235239664,202.5822222068006,230.9000023206075L215.27179134298495,236.60000228881836"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-AuthRequired LE-LinkPreauth" id="L-AuthRequired-LinkPreauth-0" d="M365.76563262939453,168.2000026702881L365.76563262939453,173.90000263849893C365.76563262939453,179.6000026067098,365.76563262939453,191.0000025431315,353.07606349321014,202.40000247955322C340.38649435702587,213.80000241597494,315.00735608465715,225.20000235239664,302.3177869484728,230.9000023206075L289.6282178122885,236.60000228881836"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TakePrize2 LE-AuthOptional2" id="L-TakePrize2-AuthOptional2-0" d="M727.7570512858875,168.2000026702881L711.5084821455881,173.90000263849893C695.2599130052889,179.6000026067098,662.7627747246903,191.0000025431315,646.5142055843911,202.40000247955322C630.2656364440918,213.80000241597494,630.2656364440918,225.20000235239664,630.2656364440918,230.9000023206075L630.2656364440918,236.60000228881836"/><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-TakePrize2 LE-AuthRequired2" id="L-TakePrize2-AuthRequired2-0" d="M822.9679700764171,168.2000026702881L839.2165392167163,173.90000263849893C855.4651083570158,179.6000026067098,887.9622466376144,191.0000025431315,904.2108157779136,202.40000247955322C920.4593849182129,213.80000241597494,920.4593849182129,225.20000235239664,920.4593849182129,230.9000023206075L920.4593849182129,236.60000228881836"/></g><g class="edgeLabels"><g transform="translate(139.1343765258789, 100.60000133514404)" class="edgeLabel"><g transform="translate(-48.53125, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="97.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">roulette_id=1</span></div></foreignObject></g></g><g transform="translate(365.76563262939453, 100.60000133514404)" class="edgeLabel"><g transform="translate(-51.46875, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="102.9375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">roulette_id!=1</span></div></foreignObject></g></g><g transform="translate(139.1343765258789, 202.40000247955322)" class="edgeLabel"><g transform="translate(-48.875, -9.199999809265137)" class="label"><foreignObject height="18.399999618530273" width="97.75"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">JWT provided</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(139.1343765258789, 151.50000190734863)" id="flowchart-AuthOptional-196" class="node default default flowchart-label"><rect height="33.39999961853027" width="175.5500030517578" y="-16.699999809265137" x="-87.7750015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-80.2750015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="160.5500030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Authorization optional</span></div></foreignObject></g></g><g transform="translate(252.45000457763672, 49.70000076293945)" id="flowchart-Spin2-195" class="node default default flowchart-label"><rect height="33.39999961853027" width="190.375" y="-16.699999809265137" x="-95.1875" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-87.6875, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="175.375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/roulette/spin</span></div></foreignObject></g></g><g transform="translate(365.76563262939453, 151.50000190734863)" id="flowchart-AuthRequired-198" class="node default default flowchart-label"><rect height="33.39999961853027" width="177.71250915527344" y="-16.699999809265137" x="-88.85625457763672" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-81.35625457763672, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="162.71250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Authorization required</span></div></foreignObject></g></g><g transform="translate(252.45000457763672, 253.3000030517578)" id="flowchart-LinkPreauth-200" class="node default default flowchart-label"><rect height="33.39999961853027" width="208.9875030517578" y="-16.699999809265137" x="-104.4937515258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-96.9937515258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="193.9875030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Link preauth_token to user</span></div></foreignObject></g></g><g transform="translate(775.3625106811523, 151.50000190734863)" id="flowchart-TakePrize2-203" class="node default default flowchart-label"><rect height="33.39999961853027" width="235.125" y="-16.699999809265137" x="-117.5625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-110.0625, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="220.125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/roulette/take-prize</span></div></foreignObject></g></g><g transform="translate(630.2656364440918, 253.3000030517578)" id="flowchart-AuthOptional2-204" class="node default default flowchart-label"><rect height="33.39999961853027" width="236.1750030517578" y="-16.699999809265137" x="-118.0875015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-110.5875015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="221.1750030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Authorization optional for id=1</span></div></foreignObject></g></g><g transform="translate(920.4593849182129, 253.3000030517578)" id="flowchart-AuthRequired2-206" class="node default default flowchart-label"><rect height="33.39999961853027" width="244.21250915527344" y="-16.699999809265137" x="-122.10625457763672" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-114.60625457763672, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="229.21250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Authorization required for id!=1</span></div></foreignObject></g></g></g></g><g transform="translate(1154.412509918213, 143.5)" id="flowchart-Start-138" class="node default default flowchart-label"><rect height="33.39999961853027" width="66.02499914169312" y="-16.699999809265137" x="-33.01249957084656" ry="16.699999809265137" rx="16.699999809265137" style=""/><g transform="translate(-21.337499618530273, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="42.67499923706055"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Client</span></div></foreignObject></g></g><g transform="translate(157.78125, 372.1000003814697)" id="flowchart-PreauthFlow-139" class="node default default flowchart-label"><rect height="33.39999961853027" width="103.9625015258789" y="-16.699999809265137" x="-51.98125076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-44.48125076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="88.9625015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">PreauthFlow</span></div></foreignObject></g></g><g transform="translate(724.4835834503174, 372.1000003814697)" id="flowchart-JwtFlow-141" class="node default default flowchart-label"><rect height="33.39999961853027" width="74.48749923706055" y="-16.699999809265137" x="-37.24374961853027" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-29.743749618530273, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="59.48749923706055"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JwtFlow</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 372.1000003814697)" id="flowchart-OAuthFlow-143" class="node default default flowchart-label"><rect height="33.39999961853027" width="92.6624984741211" y="-16.699999809265137" x="-46.33124923706055" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-38.83124923706055, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="77.6624984741211"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">OAuthFlow</span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 372.1000003814697)" id="flowchart-TgWebAppFlow-145" class="node default default flowchart-label"><rect height="33.39999961853027" width="123.73750305175781" y="-16.699999809265137" x="-61.868751525878906" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-54.368751525878906, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="108.73750305175781"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">TgWebAppFlow</span></div></foreignObject></g></g><g transform="translate(157.78125, 473.9000015258789)" id="flowchart-PreauthToken-147" class="node default default flowchart-label"><rect height="33.39999961853027" width="203.40000915527344" y="-16.699999809265137" x="-101.70000457763672" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-94.20000457763672, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="188.40000915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Create/Get Preauth Token</span></div></foreignObject></g></g><g transform="translate(157.78125, 575.7000026702881)" id="flowchart-Spin1-149" class="node default default flowchart-label"><rect height="33.39999961853027" width="146.8000030517578" y="-16.699999809265137" x="-73.4000015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-65.9000015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="131.8000030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Spin roulette_id=1</span></div></foreignObject></g></g><g transform="translate(157.78125, 659.100004196167)" id="flowchart-TakePrize1-151" class="node default default flowchart-label"><rect height="33.39999961853027" width="88.3375015258789" y="-16.699999809265137" x="-44.16875076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-36.66875076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="73.3375015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Take prize</span></div></foreignObject></g></g><g transform="translate(157.78125, 760.9000053405762)" id="flowchart-UserLinked1-153" class="node default default flowchart-label"><rect height="33.39999961853027" width="221.3125" y="-16.699999809265137" x="-110.65625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-103.15625, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="206.3125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">User linked to preauth token</span></div></foreignObject></g></g><g transform="translate(562.09375, 473.9000015258789)" id="flowchart-AuthStatus-155" class="node default default flowchart-label"><rect height="33.39999961853027" width="178.3000030517578" y="-16.699999809265137" x="-89.1500015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-81.6500015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="163.3000030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/auth/status</span></div></foreignObject></g></g><g transform="translate(325.8937530517578, 575.7000026702881)" id="flowchart-Ok200-157" class="node default default flowchart-label"><rect height="33.39999961853027" width="89.42500305175781" y="-16.699999809265137" x="-44.712501525878906" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-37.212501525878906, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="74.42500305175781"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">200 userID</span></div></foreignObject></g></g><g transform="translate(488.6687545776367, 575.7000026702881)" id="flowchart-Unauthorized401-159" class="node default default flowchart-label"><rect height="33.39999961853027" width="136.125" y="-16.699999809265137" x="-68.0625" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-60.5625, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="121.125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Unauthorized401</span></div></foreignObject></g></g><g transform="translate(661.0812530517578, 575.7000026702881)" id="flowchart-NotFound404-161" class="node default default flowchart-label"><rect height="33.39999961853027" width="108.70000457763672" y="-16.699999809265137" x="-54.35000228881836" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-46.85000228881836, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="93.70000457763672"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">NotFound404</span></div></foreignObject></g></g><g transform="translate(867.9375, 473.9000015258789)" id="flowchart-Refresh-163" class="node default default flowchart-label"><rect height="33.39999961853027" width="186.53750610351562" y="-16.699999809265137" x="-93.26875305175781" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-85.76875305175781, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="171.53750610351562"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/auth/refresh</span></div></foreignObject></g></g><g transform="translate(867.9375, 575.7000026702881)" id="flowchart-NewTokens-165" class="node default default flowchart-label"><rect height="33.39999961853027" width="85.7750015258789" y="-16.699999809265137" x="-42.88750076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-35.38750076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="70.7750015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">New JWTs</span></div></foreignObject></g></g><g transform="translate(1123.0687561035156, 473.9000015258789)" id="flowchart-GoogleVerify-167" class="node default default flowchart-label"><rect height="33.39999961853027" width="223.72500610351562" y="-16.699999809265137" x="-111.86250305175781" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-104.36250305175781, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="208.72500610351562"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">GET /api/auth/google/verify</span></div></foreignObject></g></g><g transform="translate(1123.0687561035156, 575.7000026702881)" id="flowchart-JwtOut1-169" class="node default default flowchart-label"><rect height="33.39999961853027" width="78.1875" y="-16.699999809265137" x="-39.09375" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-31.59375, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="63.1875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair</span></div></foreignObject></g></g><g transform="translate(1432.4812622070312, 473.9000015258789)" id="flowchart-GoogleRegisterOAuth2-171" class="node default default flowchart-label"><rect height="33.39999961853027" width="295.1000061035156" y="-16.699999809265137" x="-147.5500030517578" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-140.0500030517578, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="280.1000061035156"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/auth/google/registeroauth2</span></div></foreignObject></g></g><g transform="translate(1432.4812622070312, 575.7000026702881)" id="flowchart-LinkSession-173" class="node default default flowchart-label"><rect height="33.39999961853027" width="227.46250915527344" y="-16.699999809265137" x="-113.73125457763672" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-106.23125457763672, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="212.46250915527344"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Link Google ID to session user</span></div></foreignObject></g></g><g transform="translate(1432.4812622070312, 659.100004196167)" id="flowchart-JwtOut2-174" class="node default default flowchart-label"><rect height="33.39999961853027" width="140.6500015258789" y="-16.699999809265137" x="-70.32500076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.82500076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="125.6500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair + userID</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 473.9000015258789)" id="flowchart-GoogleCallback-176" class="node default default flowchart-label"><rect height="33.39999961853027" width="380.25" y="-16.699999809265137" x="-190.125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-182.625, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="365.25"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">GET /api/auth/google/callback or /googlecallback</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 575.7000026702881)" id="flowchart-GoogleUpsert-178" class="node default default flowchart-label"><rect height="33.39999961853027" width="157.0500030517578" y="-16.699999809265137" x="-78.5250015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-71.0250015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="142.0500030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Upsert by google_id</span></div></foreignObject></g></g><g transform="translate(1820.156265258789, 659.100004196167)" id="flowchart-JwtOut3-179" class="node default default flowchart-label"><rect height="33.39999961853027" width="140.6500015258789" y="-16.699999809265137" x="-70.32500076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.82500076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="125.6500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair + userID</span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 473.9000015258789)" id="flowchart-TgWebAppLogin-181" class="node default default flowchart-label"><rect height="33.39999961853027" width="264.1374969482422" y="-16.699999809265137" x="-132.0687484741211" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-124.5687484741211, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="249.1374969482422"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/auth/telegram/webapp</span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 575.7000026702881)" id="flowchart-TgUpsert-183" class="node default default flowchart-label"><rect height="33.39999961853027" width="174.8249969482422" y="-16.699999809265137" x="-87.4124984741211" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-79.9124984741211, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="159.8249969482422"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Upsert by telegram_id</span></div></foreignObject></g></g><g transform="translate(2794.7750091552734, 659.100004196167)" id="flowchart-JwtOut4-184" class="node default default flowchart-label"><rect height="33.39999961853027" width="140.6500015258789" y="-16.699999809265137" x="-70.32500076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.82500076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="125.6500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair + userID</span></div></foreignObject></g></g><g transform="translate(2181.781265258789, 473.9000015258789)" id="flowchart-TgLogin-186" class="node default default flowchart-label"><rect height="33.39999961853027" width="243" y="-16.699999809265137" x="-121.5" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-114, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="228"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">POST /api/auth/telegram/login</span></div></foreignObject></g></g><g transform="translate(2181.781265258789, 575.7000026702881)" id="flowchart-LinkSession2-188" class="node default default flowchart-label"><rect height="33.39999961853027" width="245.22500610351562" y="-16.699999809265137" x="-122.61250305175781" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-115.11250305175781, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="230.22500610351562"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Link telegram_id to session user</span></div></foreignObject></g></g><g transform="translate(2181.781265258789, 659.100004196167)" id="flowchart-JwtOut5-189" class="node default default flowchart-label"><rect height="33.39999961853027" width="140.6500015258789" y="-16.699999809265137" x="-70.32500076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.82500076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="125.6500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair + userID</span></div></foreignObject></g></g><g transform="translate(2482.9937591552734, 473.9000015258789)" id="flowchart-TgCallback-191" class="node default default flowchart-label"><rect height="33.39999961853027" width="259.4250030517578" y="-16.699999809265137" x="-129.7125015258789" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-122.2125015258789, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="244.4250030517578"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">GET /api/auth/telegram/callback</span></div></foreignObject></g></g><g transform="translate(2482.9937591552734, 575.7000026702881)" id="flowchart-TgExisting-193" class="node default default flowchart-label"><rect height="33.39999961853027" width="218.0625" y="-16.699999809265137" x="-109.03125" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-101.53125, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="203.0625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Existing user by telegram_id</span></div></foreignObject></g></g><g transform="translate(2482.9937591552734, 659.100004196167)" id="flowchart-JwtOut6-194" class="node default default flowchart-label"><rect height="33.39999961853027" width="140.6500015258789" y="-16.699999809265137" x="-70.32500076293945" ry="0" rx="0" style="" class="basic label-container"/><g transform="translate(-62.82500076293945, -9.199999809265137)" style="" class="label"><rect/><foreignObject height="18.399999618530273" width="125.6500015258789"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">JWT pair + userID</span></div></foreignObject></g></g></g></g></g></svg>